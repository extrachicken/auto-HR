# Автоматическое создание Typeform из описания вакансии

## Введение

Этот проект предназначен для автоматического создания форм Typeform на основе описания вакансии и списка обязательных качеств (must-haves). Он использует API OpenAI для генерации вопросов, API Typeform для создания форм и Google Sheets для хранения данных о вакансиях. Цель проекта — упростить процесс создания форм для найма, автоматизируя генерацию вопросов и интеграцию с популярными сервисами.

## Основные функции

- **Чтение данных из Google Sheets**: Проект извлекает описание вакансии и список обязательных качеств из указанной строки в Google Sheets.
- **Генерация вопросов с помощью OpenAI**: На основе описания вакансии создаются вопросы для формы с использованием модели GPT-4.
- **Обработка обязательных качеств**: Формируются вопросы по must-haves, включая логику для обработки ожиданий по зарплате.
- **Создание формы в Typeform**: Все части формы (вопросы по описанию вакансии, must-haves и стандартные поля) объединяются и отправляются через Typeform API.
- **Запись данных в Google Sheets**: Сгенерированные вопросы и ссылка на форму сохраняются обратно в Google Sheets.

## Структура проекта

Проект состоит из следующих модулей:

- **`sheets_utils.py`**: Функции для работы с Google Sheets (чтение данных из строк, запись значений в ячейки).
- **`settings.py`**: Конфигурационные параметры (имена листов, идентификаторы столбцов, ключи API и т.д.).
- **`constants_json.py`**: Генерация стандартных полей формы (имя, email, телефон) и экранов благодарности с редиректом.
- **`gpt_json.py`**: Генерация вопросов по описанию вакансии с использованием OpenAI API.
- **`must_haves_json.py`**: Создание вопросов по обязательным качествам и логики для обработки ответов о зарплате.
- **`main_typeform.py`**: Основной модуль, который собирает JSON для Typeform и отправляет его в API.

## Установка и настройка

1. **Установите необходимые библиотеки**:
   ```bash
   pip install google-api-python-client google-auth google-auth-oauthlib google-auth-httplib2 openai requests flask
   ```

2. **Настройте учетные данные**:
   - Получите учетные данные для Google Sheets API и сохраните их в файл `creds.json`.
   - Укажите API ключи для OpenAI и Typeform в переменных окружения или в `settings.py`.

3. **Настройте Google Sheets**:
   - Убедитесь, что у вас есть доступ к Google Sheets с данными.
   - Укажите имена листов и идентификаторы столбцов в `settings.py`.

4. **Настройте Typeform**:
   - Проверьте доступ к Typeform API и укажите правильный API ключ в `settings.py`.

## Использование

1. **Запустите главный скрипт**:
   ```bash
   python main_typeform.py
   ```

2. **Передайте параметры**:
   - Укажите `row_id` как параметр запроса, чтобы выбрать строку в Google Sheets.
   - Пример: `http://localhost:5000/?row_id=2`

3. **Получите результат**:
   - Проект прочитает данные из строки, сгенерирует вопросы, создаст форму в Typeform и сохранит результаты в Google Sheets.
   - В ответе вы получите JSON с информацией о созданной форме.

## Пример

### Запрос

```
GET /?row_id=2
```

### Ответ

```json
{
  "ok": true,
  "form_url": "https://your-typeform-url",
  "questions_written_to": "G2",
  "form_link_written_to": "H2"
}
```

### Объяснение

- **`form_url`**: Ссылка на созданную форму в Typeform.
- **`questions_written_to`**: Ячейка с записанными вопросами (например, G2).
- **`form_link_written_to`**: Ячейка с записанной ссылкой на форму (например, H2).

